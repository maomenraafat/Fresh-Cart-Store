<form
  [formGroup]="registerForm"
  (ngSubmit)="register()"
  class="max-w-4xl rounded-xl mx-auto p-4 shadow-lg my-10"
>
  <h1 class="text-3xl mb-4">Register Form :</h1>

  @if(apiErrorMesage){
  <div
    class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
    role="alert"
  >
    {{ apiErrorMesage }}
  </div>
  }

  <div class="relative z-0 w-full mb-5 group">
    @let inputControl = registerForm.get("name");

    <app-custom-input formControlName="name" [type]="'text'">
      <label
        for="floating_name"
        class="label label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
        >User Name :</label
      >
    </app-custom-input>

    <!-- <input
      type="text"
      formControlName="name"
      name="floating_name"
      id="floating_name"
      class="input-style peer"
      placeholder=" "
      required
    /> -->

    <app-error-message [inputControl]="inputControl"></app-error-message>
  </div>

  <div class="relative z-0 w-full mb-5 group">
    @let emailControl = registerForm.get("email");
    <app-custom-input formControlName="email" [type]="'email'">
      <label
        for="floating_email"
        class="label label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
        >User Email :</label
      >
    </app-custom-input>

    <!-- <input
      type="email"
      formControlName="email"
      name="floating_email"
      id="floating_email"
      class="input-style peer"
      placeholder=" "
      required
    /> -->

    <!-- <label
      for="floating_email"
      class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >User Email :</label
    > -->
    <app-error-message [inputControl]="emailControl"></app-error-message>
  </div>
  <div class="relative z-0 w-full mb-5 group">
    @let passwordControl = registerForm.get("password");
    <app-custom-input formControlName="password" [type]="'password'">
      <label
        for="floating_password"
        class="label label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
        >Password :</label
      >
    </app-custom-input>

    <!-- <input
      type="password"
      formControlName="password"
      name="floating_password"
      id="floating_password"
      class="input-style peer"
      placeholder=" "
      required
    /> -->

    <!-- <label
      for="floating_password"
      class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Password :</label
    > -->
    <app-error-message [inputControl]="passwordControl"></app-error-message>
  </div>

  <div class="relative z-0 w-full mb-5 group">
    @let rePasswordControl = registerForm.get("rePassword");
    <app-custom-input formControlName="rePassword" [type]="'password'">
      <label
        for="floating_repassword"
        class="label label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
        >Repassword :</label
      >
    </app-custom-input>

    <!-- <input
      type="password"
      formControlName="rePassword"
      name="floating_repassword"
      id="floating_repassword"
      class="input-style peer"
      placeholder=" "
      required
    /> -->

    <!-- <label
      for="floating_repassword"
      class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Repassword :</label
    > -->
    @if (rePasswordControl?.touched &&(rePasswordControl?.errors ||
    registerForm.getError("misMatch")) ) {
    <div
      class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
      role="alert"
    >
      <ul class="mt-1.5 list-disc list-inside">
        @if(rePasswordControl?.getError("required")){
        <li>rePassword is required</li>
        } @else if(rePasswordControl?.getError("pattern")){
        <li>Invalid Pattern</li>
        } @else if(registerForm.getError("misMatch")){
        <li>password and repassword should match</li>
        }
      </ul>
    </div>
    }
  </div>

  <div class="relative z-0 w-full mb-5 group">
    @let phoneControl = registerForm.get("phone");
    <app-custom-input formControlName="phone" [type]="'tel'">
      <label
        for="floating_phone"
        class="label label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
        >Phone :</label
      >
    </app-custom-input>

    <!-- <input
      type="tel"
      formControlName="phone"
      name="floating_phone"
      id="floating_phone"
      class="input-style peer"
      placeholder=" "
      required
    /> -->

    <!-- <label
      for="floating_phone"
      class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Phone :</label
    > -->

    <app-error-message [inputControl]="phoneControl"></app-error-message>
  </div>

  <button type="submit" class="main-btn">
    @if (isCallingApi) {
    <i class="fa fa-spin fa-spinner"></i>
    }@else{ Submit }
  </button>
</form>
