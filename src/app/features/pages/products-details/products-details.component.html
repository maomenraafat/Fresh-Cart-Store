@if (apiError) {
<h2 class="text-5xl text-main mx-auto text-center capitalize">
  failed to get this product
</h2>
}@else {
<div
  class="flex flex-col items-center sm:justify-center gap-8 mb-10 p-4 sm:flex-row sm:items-center sm:gap-12"
>
  <div class="w-full sm:w-1/2 lg:w-1/2 xl:w-1/3">
    <owl-carousel-o [options]="customOptions" class="m-8">
      @for (src of productDetails.images; track $index) {
      <ng-template carouselSlide [id]="src">
        <img [src]="src" [alt]="src" [title]="src" />
      </ng-template>
      }
    </owl-carousel-o>
  </div>
  <div class="w-full sm:w-1/2 lg:w-1/2 xl:w-2/3">
    <h1 class="text-4xl mb-3">{{ productDetails.title }}</h1>
    <p class="mb-8">{{ productDetails.description }}</p>
    <span>{{ productDetails.category.name }}</span>
    <div class="flex justify-between mb-3">
      <p>{{ productDetails.price }}</p>
      <p>
        <i class="fa fa-star text-[#ffc908]"></i>
        {{ productDetails.ratingsAverage }}
      </p>
    </div>
    <div class="flex flex-wrap justify-center items-center">
      <button
        (click)="addToCart(productDetails.id)"
        class="text-white p-2 rounded-md w-[80%] mx-auto block mt-3 bg-main transition-all duration-500 hover:bg-green-600 overflow-hidden"
      >
        @if (isLoading) {
        <i class="fa fa-spin fa-spinner"></i>
        }@else{Add to Cart}
      </button>
      <button
        (click)="addToWishList(productDetails._id)"
        class="cursor-pointer block ms-auto"
      >
        <i
          class="fa-solid fa-heart text-2xl transition-all duration-300"
          [ngClass]="{
            'text-red-500': isInWishList,
            'text-gray-500': !isInWishList
          }"
        ></i>
      </button>
    </div>
  </div>
</div>

<h2 #related class="text-4xl font-bold my-7">Related Product</h2>

@defer (on viewport (related) ; on timer(10000ms) ) {
<app-related-product [relatedProducts]="relatedProducts"></app-related-product>
} }
