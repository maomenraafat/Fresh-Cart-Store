@if (cartDetails?.numOfCartItems != 0 && emptyCart === false) {
<section class="cart p-8 bg-gray-50 rounded-lg shadow-md">
  <!-- Cart Header -->
  <div class="cart__header my-7">
    <div class="flex flex-col md:flex-row items-center justify-between mb-7">
      <h1 class="capitalize text-main font-bold text-4xl">Shopping Cart</h1>
      <button
        (click)="clearCart()"
        class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition"
      >
        Clear Cart
      </button>
    </div>

    <div
      class="flex flex-col md:flex-row items-center justify-between text-xl font-semibold text-gray-800"
    >
      <h2>Total Items: {{ cartDetails?.numOfCartItems }}</h2>
      <p class="text-main">
        Total Price: $ {{ cartDetails?.data?.totalCartPrice }}
      </p>
    </div>
  </div>

  <!-- Cart Body -->
  <div
    class="cart__body relative overflow-x-auto shadow-md sm:rounded-lg my-7 bg-white p-5"
  >
    <table class="w-full text-sm text-left rtl:text-right text-gray-700">
      <thead class="text-xs text-gray-700 uppercase bg-gray-100">
        <tr>
          <th scope="col" class="px-6 py-3">
            <span class="sr-only">Image</span>
          </th>
          <th scope="col" class="px-6 py-3">Product</th>
          <th scope="col" class="px-6 py-3">Qty</th>
          <th scope="col" class="px-6 py-3">Price</th>
          <th scope="col" class="px-6 py-3">Action</th>
        </tr>
      </thead>
      <tbody>
        @for (product of cartDetails?.data?.products; track $index) {
        <tr class="border-b hover:bg-gray-50 transition">
          <!-- Product Image -->
          <td class="p-4">
            <img
              [src]="product.product.imageCover"
              class="w-16 md:w-32 rounded-md shadow-sm"
              alt="{{ product.product.title }}"
            />
          </td>

          <!-- Product Name -->
          <td class="px-6 py-4 font-semibold text-gray-900">
            {{ product.product.title }}
          </td>

          <!-- Quantity Controls -->
          <td class="px-6 py-4">
            <div class="flex items-center gap-3">
              <button
                (click)="UpdateCart(product.product._id, product.count - 1)"
                class="h-8 w-8 flex items-center justify-center border border-gray-300 rounded-full bg-white hover:bg-gray-200 transition"
              >
                <i class="fa fa-minus text-gray-600"></i>
              </button>
              <span class="font-medium text-lg">{{ product.count }}</span>
              <button
                (click)="UpdateCart(product.product._id, product.count + 1)"
                class="h-8 w-8 flex items-center justify-center border border-gray-300 rounded-full bg-white hover:bg-gray-200 transition"
              >
                <i class="fa fa-plus text-gray-600"></i>
              </button>
            </div>
          </td>

          <!-- Price -->
          <td class="px-6 py-4 font-semibold text-gray-900">
            $ {{ product.price }}
          </td>

          <!-- Remove Button -->
          <td class="px-6 py-4">
            <button
              (click)="removeItemFromCart(product.product._id)"
              class="text-red-600 font-medium hover:underline transition"
            >
              <i class="fa fa-trash"></i> Remove
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Checkout Button -->
  <div class="text-center mt-5">
    <a
      [routerLink]="['/checkout', cartDetails?.cartId]"
      class="bg-main text-white px-6 py-3 rounded-md font-semibold hover:bg-green-600 transition"
    >
      Proceed to Checkout
    </a>
  </div>
</section>
} @else {
<h1 class="text-4xl text-main mx-auto text-center capitalize my-10">
  No Items in Cart
</h1>
}
